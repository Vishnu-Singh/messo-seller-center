{% extends 'documentation/base.html' %}

{% block content %}
<h1 class="page-title">{{ endpoint.name }}</h1>

<div class="card">
    <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
        <span class="badge badge-app">{{ endpoint.app|title }}</span>
        {% if endpoint.api_type == 'rest' %}
        <span class="badge badge-rest">REST API</span>
        {% else %}
        <span class="badge badge-soap">SOAP API</span>
        {% endif %}
        {% if endpoint.http_method %}
        <span class="badge" style="background: #6366f1; color: white;">{{ endpoint.http_method }}</span>
        {% endif %}
    </div>
    
    <h3>URL Path</h3>
    <pre><code>{{ endpoint.url_path }}</code></pre>
    
    <h3>Description</h3>
    <p>{{ endpoint.description }}</p>
</div>

{% if endpoint.request_example %}
<section style="margin-top: 2rem;">
    <h2 style="color: #667eea;">Request Example</h2>
    <pre><code>{{ endpoint.request_example }}</code></pre>
</section>
{% endif %}

{% if endpoint.response_example %}
<section style="margin-top: 2rem;">
    <h2 style="color: #667eea;">Response Example</h2>
    <pre><code>{{ endpoint.response_example }}</code></pre>
</section>
{% endif %}

{% if changes %}
<section style="margin-top: 2rem;">
    <h2 style="color: #667eea;">Change History</h2>
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Change Type</th>
                <th>Version</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            {% for change in changes %}
            <tr>
                <td>{{ change.changed_at|date:"Y-m-d H:i" }}</td>
                <td>
                    <span class="badge" style="background: #3b82f6;">{{ change.change_type|title }}</span>
                    {% if change.breaking_change %}
                    <span class="badge" style="background: #ef4444;">Breaking</span>
                    {% endif %}
                </td>
                <td>v{{ change.version }}</td>
                <td>{{ change.description }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>
{% endif %}

<div style="margin-top: 2rem;">
    <a href="{% url 'documentation:api-docs' %}" class="btn">‚Üê Back to API Documentation</a>
</div>
{% endblock %}
